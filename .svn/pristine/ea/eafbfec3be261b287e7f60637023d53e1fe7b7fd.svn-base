define("Launcher",["ajax","SideNavigation"],function(a,b){function c(a){if(""!==a){var b;Ca=a,b=JSON.parse(a),window.localStorage.setItem("AuthUserInfo",a),ua=JSON.parse(localStorage.AuthUserInfo).response.role.description,0!==b.responseHeader.status}readerAppHelper.addADSEvents("FBS_SIMULATION_BROWSE",{memberID:JSON.parse(localStorage.AuthUserInfo).response.id,referrer:JSON.parse(localStorage.AuthUserInfo).response.role.description})}function d(){function a(){var a=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?cordova.file.dataDirectory:cordova.file.externalDataDirectory||"",b=window.SIM_DWL_SRV+"/simulations/common/allspark/1.0.8.zip",c=(encodeURI(b),a),d=c+"allspark/assets/images/ur_avt.png",e=new FileTransfer;e.download(this.info.userImage,d,function(a){window.localStorage.setItem("User_Avtar_url",d)},function(a){console.log("error in downloading :"+a)})}if(!/^[\],:{}\s]*$/.test(localStorage.reader_app_config.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return this.info={},this.info.userImage=!1,!1;var b=JSON.parse(localStorage.reader_app_config);if(this.info=b,!b.email)return this.info.userImage=!1,!1;b.userImage||(b.userImage="assets/images/user_icon.png"),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return 0===this.indexOf(a)});var c=b.userImage,d="/flx/show/image";if(c.startsWith(d)&&(b.userImage=c.replace("/flx/show/image",window.API_SERVER_URL+"/flx/show/image")),this.info.userImage=window.localStorage.getItem("User_Avtar_url")||b.userImage,document.getElementsByClassName("user-avatar-image")[0].src=this.info.userImage,document.getElementsByClassName("name")[0].innerHTML=this.info.userName,document.getElementsByClassName("email")[0].innerHTML=this.info.email,document.querySelector("#UserProfileView img").src=this.info.userImage,this.userProfile=!0,!window.localStorage.getItem("User_Avtar_url"))try{a()}catch(e){setTimeout(function(){a()},300)}}function f(a){a.preventDefault(),a.stopPropagation(),setTimeout(function(){document.querySelector("#UserProfileView").classList.remove("hide"),document.getElementById("UserProfileView").addEventListener("click",function(a){a.stopPropagation()},!1)},20)}function g(a){m()?(a.preventDefault(),a.stopPropagation(),h()):j()}function h(a){function b(a){alert("FILE SYSTEM FAILURE")}function c(a){a.root.getFile("Android/data/org.ck12.simulations/files/allspark/assets/images/ur_avt.png",{create:!0,exclusive:!1},function(a){a.remove(function(){readerAppHelper.logout(function(a){window.localStorage.removeItem("User_Avtar_url"),window.location.href="../auth/login.html"}),console.log("Vipin Bhai Chaa Gaye")},b)},b)}window.requestFileSystem(LocalFileSystem.PERSISTENT,1048576,c,b)}function i(b){function c(a){m()?(a.stopPropagation(),readerAppHelper.addADSEvents("FBS_ACTION",{memberID:JSON.parse(localStorage.AuthUserInfo).response.id,action_type:"button",action_name:"instruction_video",screen_name:"simulation_app_home"}),document.getElementById("UserProfileView").classList.contains("hide")&&(document.getElementsByClassName("instruction-title")[0].innerHTML="SIM INSTRUCTION TUTORIAL",z.setAttribute("src",A),w.classList.add("hide-back"),p.classList.remove("hide"))):j()}function h(a){F(),z.setAttribute("src",""),w.classList.remove("hide-back"),p.classList.add("hide")}function i(a){a.stopPropagation(),readerAppHelper.addADSEvents("FBS_ACTION",{memberID:JSON.parse(localStorage.AuthUserInfo).response.id,action_type:"toggle",action_name:"offline_online",screen_name:"simulation_app_home"}),q.classList.contains("toggle-button-selected")?(La.unselectAllCheckBox(),Ma&&Ma.unselectAllCheckBox(),q.classList.remove("toggle-button-selected"),ya=!1,Ja.value="",na()):(La.unselectAllCheckBox(),Ma&&Ma.unselectAllCheckBox(),q.classList.add("toggle-button-selected"),ya=!0,Ja.value="",v()),document.getElementsByClassName("no-match-found")[0].classList.add("hide")}function n(b,c){var d=[],e=200,f=0;Ea.simulations.forEach(function(g,h){var i=Ea.simulations.length-1===h;if(d.push({name:g.name,allsparkSupport:e}),window.localStorage.getItem(g.simulationUrl.split("/")[0])){var j=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?cordova.file.dataDirectory:cordova.file.externalDataDirectory,k=g.simulationUrl,l=k.split("/")[0],m=j+l+"/package.json";a.loadURL(m,{callback:function(a){if(a){f++,a=JSON.parse(a);var i=a.minAppVersion||"1",j=a.version||"1";j=j.split(".")[0],console.log(a),e=wa>=i?j==g.simVersionSupported?200:402:404,console.log(g.name,e,h);for(var k in d)if(d[k].name==a.name){d[k].allsparkSupport=e,console.log(d[k].name,d[k].allsparkSupport,k);break}}f==c&&b.resolve(d)}})}i&&0==c&&b.resolve(d)})}function o(a){""!=a&&(localStorage.setItem("saved-standards",a),Ha=JSON.parse(a),s(),P(),document.getElementsByClassName("no-match-found")[0].classList.add("hide"))}m();Da=b,Na.innerHTML=Da,d(),document.ontouchmove=function(a){},document.ontouchstart=function(a){},document.getElementsByClassName("close-modal")[0].addEventListener("click",K,!1),document.getElementsByClassName("clear-box")[0].addEventListener("click",u,!1),document.getElementsByClassName("nav-bottom")[0].addEventListener("click",t,!1),document.getElementsByClassName("clear-item")[0].classList.add("hide-back"),document.getElementsByClassName("user-avatar")[0].addEventListener("click",f,!1),document.getElementsByClassName("signout")[0].addEventListener("click",g,!1),document.getElementsByClassName("signout")[0].addEventListener("touch",g,!1),document.getElementsByClassName("user-profile-container")[0].addEventListener("click touch",function(){e.preventDefault(),e.stopPropagation()},!1),ErrorMsgWindow=document.getElementById("MessageView"),ErrorMsgClose=document.getElementById("msgModalClose"),ErrorMsgWindow.addEventListener("touchmove",function(a){a.preventDefault(),a.stopPropagation()},!1),ErrorMsgWindow.addEventListener("scroll",function(a){a.preventDefault(),a.stopPropagation()},!1),ErrorMsgClose.addEventListener("click",k,!1),filterWindow=document.getElementsByClassName("filter-container")[0],filterWindow.addEventListener("scroll",function(a){},!1);var p,q,w,x,y,z,A="https://www.youtube.com/embed/cmdBI54ew3M?wmode=opaque&amp;rel=0&amp;autohide=1&amp;wmode=transparent";p=document.getElementsByClassName("InstructionVideo-screen")[0],q=document.getElementById("offlineTab"),w=document.getElementsByClassName("instructor-tutorial")[0],x=document.getElementsByClassName("instruction-close")[0],y=document.getElementsByClassName("iframe-parent")[0],z=document.getElementsByClassName("instruction-video-frame")[0],w.addEventListener("click",c,!1),p.addEventListener("touchmove",function(a){a.stopPropagation()},!1),p.addEventListener("scroll",function(a){a.stopPropagation()},!1),x.addEventListener("click",h,!1),q.addEventListener("touchstart",i,!1),$.ajax({url:window.API_SERVER_URL+"/flx/search/direct/modality/minimal/simulationint/internaltags.ext:featured?specialSearch=true&format=json'",success:function(a){if(a=JSON.parse(a),0===a.responseHeader.status){var b=JSON.stringify(a.response.Artifacts.result);localStorage.setItem("featured-sim",b)}else console.log("error")},error:function(a){console.log(a)}}),setTimeout(function(){if(localStorage.getItem("featured-sim")){var b=JSON.parse(localStorage.getItem("featured-sim"));a.loadURL("json/simulationsData.json",{callback:function(c){Ea=JSON.parse(c);for(var d=[],e=0;e<b.length;e++)Ea.simulations.filter(function(a,c){if(a.artifactID==JSON.parse(b[e].id)){var f=Ea.simulations.splice(c,1);d.push(f[0])}});Ea.simulations=d.concat(Ea.simulations);for(var f=0,g=0;g<Ea.simulations.length;g++){var h=Ea.simulations[g].simulationUrl,i=h.split("/")[0];window.localStorage.getItem(i)&&f++}if(localStorage.getItem("simUpdateData"))Fa=JSON.parse(localStorage.getItem("simUpdateData"));else{var j=$.Deferred();j.done(function(a){localStorage.setItem("simUpdateData",JSON.stringify(a)),Fa=JSON.parse(localStorage.getItem("simUpdateData")),r()}),n(j,f)}l();var k;k=m()?window.API_SERVER_URL+"/api/flx/get/branch/standards?set=NGSS&branch=SCI.PHY":"json/standardsData.json",a.loadURL(k,{callback:o})}})}else a.loadURL("json/simulationsData.json",{callback:function(b){Ea=JSON.parse(b);for(var c=0,d=0;d<Ea.simulations.length;d++){var e=Ea.simulations[d].simulationUrl,f=e.split("/")[0];window.localStorage.getItem(f)&&c++}if(localStorage.getItem("simUpdateData"))Fa=JSON.parse(localStorage.getItem("simUpdateData"));else{var g=$.Deferred();g.done(function(a){localStorage.setItem("simUpdateData",JSON.stringify(a)),Fa=JSON.parse(localStorage.getItem("simUpdateData")),r()}),n(g,c)}l();var h;h=m()?window.API_SERVER_URL+"/api/flx/get/branch/standards?set=NGSS&branch=SCI.PHY":"json/standardsData.json",a.loadURL(h,{callback:o})}})},1e3)}function j(a){event.stopPropagation(),ErrorMsgWindow.classList.remove("hide")}function k(a){a.stopPropagation(),ErrorMsgWindow.classList.add("hide")}function l(){function c(a){a.stopPropagation(),document.getElementsByClassName("filter-main-wrapper")[0].classList.contains("go-left")&&document.getElementsByClassName("filter-main-wrapper")[0].classList.remove("go-left"),setTimeout(function(){var a=window.innerHeight-140;document.getElementsByClassName("filter-container")[0].style.height=a+"px"},1e3)}function d(a){document.getElementsByClassName("header-input")[0].disabled=!1,Ga=JSON.parse(a),s(),N();for(var c=0;c<nb.length;c++)nb[c].data.sort();document.getElementsByClassName("filter-main-wrapper")[0].addEventListener("click",p,!1),document.getElementsByClassName("filter-container")[0].style.height=window.innerHeight-140+"px",document.getElementsByClassName("filter-menu-wrapper")[0].addEventListener("click",q,!1),document.getElementsByClassName("filter-menu-wrapper")[1].addEventListener("click",q,!1);var d={parent:conceptNavParent,data:eb,simData:Ea,search:function(a){ha(a)},setSearched:function(a){fa(a)}};window.sidenav=new b(d),La=window.sidenav;var e=document.getElementsByClassName("sort-box-concept")[0];if(e.addEventListener("click",La.openSideNavScreen.bind(La),!1),e.addEventListener("touchstart",p,!1),document.addEventListener("click",La.closeSideNavScreen.bind(La),!1),document.addEventListener("touchstart",La.closeSideNavScreen.bind(La),!1),document.getElementsByClassName("back-arrow")[0].addEventListener("click",pa,!1),n(),window.innerWidth<900){var f=document.getElementsByClassName("sort-item"),g=document.getElementsByClassName("side-nav-screen");document.getElementsByClassName("clear-item")[0].style.paddingLeft="10px";for(var h=0;h<f.length;h++)f[h].style.width="270px",g[h].style.width="270px"}}Ia=document.getElementsByClassName("thumbnail-view-holder")[0],Ja=document.getElementsByClassName("header-input")[0],Ja.addEventListener("click",p,!1),Ja.addEventListener("touchstart",p,!1),Ja.addEventListener("keyup",_,!1),readerAppHelper.logScreenViewEventForApp("Browse Page"),readerAppHelper.getGaSetUserId(),Ja.onpaste=function(a){setTimeout(function(){_(a)},100)},Ka=document.getElementsByTagName("header")[0],document.getElementsByClassName("main-container")[0].addEventListener("scroll",aa,!1),document.getElementsByClassName("filter-tab")[0].addEventListener("click",c,!1),conceptNavParent=document.getElementsByClassName("concept-filter")[0],conceptNavParent.classList.add("concept-filter-list"),standardsNavParent=document.getElementsByClassName("standard-filter")[0],standardsNavParent.classList.add("standards-filter-list"),document.getElementsByTagName("body")[0].addEventListener("click",pa,!1),document.getElementsByTagName("body")[0].addEventListener("touchstart",pa,!1),document.addEventListener("keydown",L,!1),a.loadURL("json/eids.json",{callback:d})}function m(){var a=new XMLHttpRequest,b=window.API_SERVER_URL+"/assessment/api/app/versions?appName=ck12sims",c=Math.round(1e4*Math.random());a.open("HEAD",b+"?subins="+c,!1);try{return a.send(),a.status>=200&&a.status<304?!0:!1}catch(d){return!1}}function n(){var a=[],b=[];if(window.location.search.split("?").length>1){for(var c=window.location.search.split("?")[1].split("&"),d=0;d<c.length;d++){var e=c[d].split("=")[0],f=c[d].split("=")[1];a[e]=f}if(null!=a.backUrl&&(backUrl=a.backUrl,document.getElementsByClassName("back-button")[0].classList.remove("hide-back"),document.getElementsByClassName("back-button")[0].addEventListener("click",o,!1)),null!=a.c)for(var g=a.c.split(","),d=0;d<g.length;d++){var h=g[d].split("%20");g[d]=h[0];for(var i=1;i<h.length;i++)g[d]+=" "+h[i];b.push(g[d].toLowerCase())}0!=b.length&&(la(),ha(b),La.selectCheckBox(b))}}function o(){window.location.href=backUrl}function p(a){a.stopPropagation(),document.querySelector("#UserProfileView").classList.add("hide"),document.getElementsByClassName("filter-main-wrapper")[0].classList.contains("go-left")||a.target.classList.contains("filter-menu-wrapper")||a.target.parentElement.classList.contains("filter-menu-wrapper")||document.getElementsByClassName("filter-main-wrapper")[0].classList.add("go-left")}function q(a){var b="Filter by Concepts"!=a.target.textContent&&(a.target.firstChild?"Filter by Concepts"!=a.target.firstChild.textContent:1)&&(a.target.previousSibling?"Filter by Concepts"!=a.target.previousSibling.textContent:1)?"standards":"concept";a.stopPropagation(),a.currentTarget.nextElementSibling.classList.toggle("hide"),a.currentTarget.childNodes[1].classList.toggle("wrapper-plus-icon"),readerAppHelper.addADSEvents("FBS_SIMULATION_BROWSE_FILTER",{filterType:b})}function r(){if(document.getElementsByClassName("tile-download")[87])for(var a=0;a<Ea.simulations.length;a++){var b=document.getElementsByClassName("tile-download")[a],c=Ea.simulations[a].simulationUrl,d=c.split("/")[0];window.localStorage.getItem(d)&&(404==Fa[a].allsparkSupport?b.classList.add("update-available"):402==Fa[a].allsparkSupport?b.classList.add("update-available"):b.classList.remove("update-available"))}}function s(){var a=document.getElementById("offlineTab");Ia.innerHTML="";for(var b=0;b<Ea.simulations.length;b++)x(b);xa?(a.classList.contains("toggle-button-selected")&&a.classList.remove("toggle-button-selected"),document.getElementsByClassName("toggle-button-container")[0].classList.remove("opacityZero"),document.getElementsByClassName("toggle-button-container")[0].classList.remove("hideOffline")):document.getElementsByClassName("toggle-button-container")[0].classList.add("hideOffline"),r()}function t(a){a.stopPropagation(),La.unselectAllCheckBox(),Ma.unselectAllCheckBox(),La.setSearched(!1),Ma.setSearched(!1)}function u(a){a.stopPropagation(),La.unselectAllCheckBox(),na(),document.getElementsByClassName("clear-item")[0].classList.add("hide-back"),Ja.value&&(document.getElementsByClassName("no-match-found")[0].classList.add("hide"),Ja.value=""),rb=!1,Ra=[],Qa=[]}function v(){la();for(var a=0;a<Ea.simulations.length;a++){var b=(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?cordova.file.dataDirectory:cordova.file.externalDataDirectory,Ea.simulations[a].simulationUrl),c=b.split("/")[0];window.localStorage.getItem(c)&&(w(a),qb=!1)}}function w(a){var b=document.getElementsByClassName("thumbnail-view")[a],c=document.getElementsByClassName("tile-delete")[a],d=document.getElementsByClassName("tile-download")[a];b.classList.remove("hide-back"),c.classList.remove("hide"),d.classList.add("hide")}function x(a){var b=document.createElement("div");b.classList.add("thumbnail-view"),b.classList.add("thumbnail-view"+a),Ia.appendChild(b);var c=document.createElement("div");c.classList.add("tile-image"),b.appendChild(c);var d=document.createElement("img");c.appendChild(d),d.classList.add("tile-thumbimage"),d.src=""+Ea.simulations[a].thumbnailUrl;var e=""+Ea.simulations[a].simulationUrl;d.alt="physics-simulations-"+e.split("/")[0],Ea.simulations[a].simulationUrl.match(/window.match_url/i)&&(d.src="url("+Ea.simulations[a].thumbnailUrl+")"),""==Ea.simulations[a].simulationUrl&&c.classList.add("comming-soon"),c.setAttribute("id",Ea.simulations[a].name);var f=document.createElement("div");f.classList.add("tile-image-name"),c.appendChild(f);var g=document.createElement("h2");g.classList.add("sim-title"),g.innerHTML=Ea.simulations[a].name,f.appendChild(g);var h=document.createElement("div");h.classList.add("tile-download"),c.appendChild(h);var i=document.createElement("div");i.classList.add("tile-delete"),i.classList.add("hide"),c.appendChild(i);var j=document.createElement("div");j.classList.add("sim-desc"),b.appendChild(j);var k=document.createElement("div");k.classList.add("sim-covers-desc"),j.appendChild(k);var l=document.createElement("div");l.classList.add("sim-covers"),k.appendChild(l);var m=document.createElement("div");m.classList.add("sim-covers-concepts"),l.appendChild(m),m.innerHTML="<span class='sim-info sim-covers-focused'>CONCEPTS</span>",m.addEventListener("click",E,!1);var n=document.createElement("div");n.classList.add("sim-covers"),k.appendChild(n);var o=document.createElement("div");o.classList.add("sim-covers-standards"),n.appendChild(o),o.innerHTML="<span class='sim-info'>STANDARDS</span>",o.addEventListener("click",E,!1);var p=document.createElement("div");p.classList.add("sim-covers-tags"),j.appendChild(p);var q=document.createElement("div");q.classList.add("sim-covers-tags"),q.classList.add("sim-sim-cover"),p.appendChild(q);var r=document.createElement("div");r.classList.add("button-less-more"),r.classList.add("hide"),p.appendChild(r);var s=document.createElement("div");s.classList.add("button"),s.classList.add("less"),s.classList.add("more"),r.appendChild(s),s.addEventListener("click",B,!1);var t=document.createElement("span");t.classList.add("more"),t.classList.add("more-btn"),t.classList.add("lable"),t.innerHTML="More",s.appendChild(t);var u=document.createElement("span");u.classList.add("image"),u.classList.add("more-btn"),s.appendChild(u);var v=document.createElement("div");v.classList.add("sim-covers-tags"),v.classList.add("sim-covers-tags-s"),j.appendChild(v);var w=document.createElement("div");if(w.classList.add("sim-std-desc-view"),w.classList.add("hide"),j.appendChild(w),Ea.simulations[a].document_id){var x=document.createElement("div");x.classList.add("sim-covers-res"),j.appendChild(x),x.addEventListener("click",H,!1);var z=document.createElement("div");z.classList.add("sim-covers-resources"),x.appendChild(z),z.innerHTML="<span class='sim-info'>RESOURCES</span>";var F=document.createElement("div");F.classList.add("sim-res-arrow"),x.appendChild(F)}else p.classList.add("no-resources"),b.classList.add("no-resources");for(var G=[],I=0;I<Ea.simulations[a].concepts.length;I++){var K=document.createElement("a");q.appendChild(K);var L=Ea.simulations[a].concepts[I];if(I<Ea.simulations[a].concepts.length-1){M(L),K.title="Physics Simulations and Interactives- "+Ua,K.innerHTML=" "+Ua,G.push(Ua);var N=document.createElement("span");q.appendChild(N),N.innerHTML=","}else M(L),K.title="Physics Simulations and Interactives- "+Ua,K.innerHTML=" "+Ua,G.push(Ua);if(K.refValue=Va,K.addEventListener("click",function(a){J(this)},!1),Ha&&Ha.response.concepts[L]){var P=Ha.response.concepts[L].standards;O(P)}}if(G.toString().length>125&&(r.classList.remove("hide"),r.parentElement.parentElement.parentElement.classList.add("readMore")),hb.length>0)for(var Q=0;Q<hb.length;Q++){var R=document.createElement("a");if(v.appendChild(R),Q<hb.length-1){R.title="Physics Simulations and Interactives- "+Wa[Q],R.innerHTML=" "+Wa[Q];var S=document.createElement("span");v.appendChild(S),S.innerHTML=","}else R.title="Physics Simulations and Interactives- "+Wa[Q],R.innerHTML=" "+Wa[Q];R.refValue=Xa[Q],R.addEventListener("click",D,!1)}else n.classList.add("hide-back");hb=[],ib=[],gb=!0;var T=Ea.simulations[a].simulationUrl,g=T.split("/")[0];window.localStorage.getItem(g)?(h.classList.add("downloaded"),za.push(g),xa=!0):h.classList.remove("downloaded"),za=za.filter(function(a,b){return za.indexOf(a)==b}),c.addEventListener("click",y,!1),document.getElementsByClassName("sim-covers-concepts")[a].addEventListener("click",A,!1),document.getElementsByClassName("sim-covers-standards")[a].addEventListener("click",C,!1),v.classList.add("hide-back")}function y(a){var b="";a.target.classList.contains("tile-thumbimage")?(b=a.target.parentElement.id,document.getElementById(b).getElementsByClassName("tile-download")[0].classList.contains("update-available")?R(b):T(b)):a.target.classList.contains("sim-title")?(b=a.target.parentElement.parentElement.id,document.getElementById(b).getElementsByClassName("tile-download")[0].classList.contains("update-available")?R(b):T(b)):a.target.classList.contains("tile-download")&&!a.target.classList.contains("update-available")?(b=a.target.parentElement.id,document.getElementById(b).getElementsByClassName("tile-download")[0].classList.contains("update-available")?R(b):document.getElementById(b).getElementsByClassName("tile-download")[0].classList.contains("downloaded")?T(b):document.getElementById(b).getElementsByClassName("tile-download")[0].classList.contains("downloaded")||U(b)):a.target.classList.contains("update-available")?(b=a.target.parentElement.id,R(b)):a.target.classList.contains("tile-delete")&&(b=a.target.parentElement.id,z(b))}function z(a){if(document.getElementById("deletePermissionView"))document.getElementById("deletePermissionView").classList.remove("hide"),$("#deletePermissionView #yes").off("click").on("click",function(){Z(a)});else{var b=document.createElement("div");b.id="deletePermissionView";var c="";c+='<div class="delete-permission-container">',c+='				<div class="delete-text-container">',c+='					<div class="error-header">Are you sure you want to delete this Simulation?</div>',c+="				</div>",c+='				<div class="delete-button-container"><div id="yes" class="delete-confirm-button">YES</div><div id="no" class="delete-confirm-button">NO</div></div>',c+="			</div>",b.innerHTML=c,document.body.appendChild(b),$("#deletePermissionView #no").off("click").on("click",function(){$("#deletePermissionView").addClass("hide")}),$("#deletePermissionView #yes").off("click").on("click",function(){Z(a)})}}function A(a){a.currentTarget.parentElement.parentElement.parentElement.childNodes[2].classList.add("hide-back"),a.currentTarget.parentElement.parentElement.parentElement.childNodes[1].classList.remove("hide-back")}function B(a){a.stopPropagation();var b=this.parentElement.parentElement.parentElement.parentElement;b.classList.contains("expand")?(b.classList.remove("expand"),this.getElementsByClassName("lable")[0].innerHTML="More"):(b.classList.add("expand"),this.getElementsByClassName("lable")[0].innerHTML="Less")}function C(a){a.currentTarget.parentElement.parentElement.parentElement.childNodes[1].classList.add("hide-back"),a.currentTarget.parentElement.parentElement.parentElement.childNodes[2].classList.remove("hide-back")}function D(a){a.stopPropagation(),Sa&&(Sa.classList.add("hide"),Ta.style.fontWeight="normal"),Sa=a.currentTarget.parentElement.parentElement.childNodes[3],Sa.classList.remove("hide"),Sa.innerHTML=a.currentTarget.refValue,Ta=a.currentTarget,Ta.style.fontWeight="bold";for(var b="",c=0;c<Ea.simulations.length;c++)if(a.target.parentElement.parentElement.previousElementSibling.id===Ea.simulations[c].name){b=Ea.simulations[c].artifactID;break}readerAppHelper.addADSEvents("FBS_ACTION",{memberID:JSON.parse(localStorage.AuthUserInfo).response.id,action_type:"link",action_name:"standards",screen_name:"simulation_app_home",additional_params1:b,additional_params2:a.currentTarget.innerHTML})}function E(a){for(var b,c=0;2>c;c++)a.currentTarget.parentElement.parentElement.childNodes[c].childNodes[0].childNodes[0].classList.remove("sim-covers-focused");a.currentTarget.childNodes[0].classList.add("sim-covers-focused"),a.target.innerHTML.indexOf("STANDARDS")>-1?b="standards":a.target.innerHTML.indexOf("CONCEPTS")>-1&&(b="concept"),readerAppHelper.addADSEvents("FBS_SIMULATION_TILE_TAB",{tabType:b})}function F(){document.getElementById("instructionContainer").classList.remove("padding-zero"),document.getElementsByClassName("instruction-title")[0].innerHTML="",document.getElementById("seprate").classList.add("hide"),document.getElementsByClassName("instruction-title")[0].classList.remove("worksheet-title")}function G(){document.getElementsByClassName("filter-main-wrapper")[0].classList.add("go-left"),document.getElementById("instructionContainer").classList.add("padding-zero"),document.getElementsByClassName("instruction-title")[0].innerHTML="Worksheet",document.getElementsByClassName("instruction-title")[0].classList.add("worksheet-title"),document.getElementById("seprate").classList.remove("hide"),document.getElementsByClassName("instructor-tutorial")[0].classList.add("hide-back"),document.getElementsByClassName("InstructionVideo-screen")[0].classList.remove("hide")}function H(a){if(m()){console.log(a.target),a.stopPropagation();var b="",c="";G(),Ea.simulations.forEach(function(d,e){(a.target.parentElement.parentElement.previousSibling?d.name!==a.target.parentElement.parentElement.previousSibling.id:1)&&(a.target.parentElement.parentElement.parentElement.previousSibling?d.name!==a.target.parentElement.parentElement.parentElement.previousSibling.id:1)&&(a.target.parentElement.previousSibling?d.name!==a.target.parentElement.previousSibling.id:1)||(b=Ea.simulations[e].artifactID,c=d.name,avl_doc_id=Ea.simulations[e].document_id||"")}),I(avl_doc_id)}else j()}function I(a){console.log(Ya+" "+Ya.length);var b="https://view-api.box.com/1/sessions/",a=a,c="/view?theme=light";console.log("doc_object :"+Ya),$.ajax({type:"GET",url:window.API_SERVER_URL+"/flx/get/box/viewer/session?document_id="+a,success:function(a){a=JSON.parse(a);var d=a.response.session;document.getElementsByClassName("instruction-video-frame")[0].setAttribute("src",b+d+c)},error:function(a){alert(a+"=PDF FINDING ERROR")}})}function J(a){if(event.stopPropagation(),m()){var b=window.API_SERVER_URL+"/embed/#module=concept&handle="+a.refValue+"&filters=text,multimedia&branch=Physics&view_mode=embed&utm_source=browsePage&utm_medium=web&utm_campaign=Embed&referrer=ck12simulations_app&nochrome=true";ra&&(ra=!1,qa=window.open(b,"_blank","location=no,zoom=no,enableViewportScale=no")),qa.addEventListener("exit",function c(){ra=!0,qa.removeEventListener("exit",c)})}else j()}function K(){event.stopPropagation(),document.getElementsByClassName("modal-window")[0].classList.add("hide"),document.getElementsByClassName("i-frame")[0].setAttribute("src","")}function L(a){return console.log(a.keyCode),13==a.keyCode?(a.preventDefault(),console.log("Enter spotted: prevent!"),temp=document.activeElement,temp.blur(),!1):!0}function M(a){var b=!1;Ua="";for(var c=0;c<Ga.concepts.length;c++)a==Ga.concepts[c].encodedID&&(Ua=Ga.concepts[c].name,Va=Ga.concepts[c].handle);for(var d=0;d<Oa.length;d++)Oa[d]==Ua&&(b=!0);(Za||!b)&&(Oa.push(Ua),Za=!1)}function N(){for(var a=0;a<Ga.concepts.length;a++)for(var b=0;b<Oa.length;b++)if(Ga.concepts[a].name==Oa[b])for(var c=0;c<eb.length;c++)Ga.concepts[a].category==eb[c].name&&eb[c].data.push(Oa[b])}function O(a){var b=!1,c=!1;Wa=a;for(var d=0;d<Wa.length;d++){for(var e=0;e<Pa.length;e++)Pa[e].label==Ha.response.standards[Wa[d]].label&&(b=!0);(fb||!b)&&(Pa.push({label:Ha.response.standards[Wa[d]].label,description:Ha.response.standards[Wa[d]].description,ancestors:Ha.response.standards[Wa[d]].ancestors}),fb=!1);for(var e=0;e<hb.length;e++)hb[e]==Ha.response.standards[Wa[d]].label&&(c=!0);(gb||!c)&&(gb=!1,hb.push(Ha.response.standards[Wa[d]].label),ib.push(Ha.response.standards[Wa[d]].description)),c=!1}Wa=hb,Xa=ib}function P(){for(var a=0;a<Pa.length;a++)for(var c=0;c<nb.length;c++)Pa[a].label.match(nb[c].name)&&nb[c].data.push(Pa[a]),!nb[c].description&&nb[c].data.length&&(nb[c].description=nb[c].data[0].ancestors[1].description);var d={parent:standardsNavParent,data:nb,simData:Ea,search:function(a){ia(a)},setSearched:function(a){ga(a)}};window.sidenav2=new b(d),Ma=window.sidenav2;var e=document.getElementsByClassName("sort-box-standard")[0];e.addEventListener("click",Ma.openSideNavScreen.bind(Ma),!1),e.addEventListener("touchstart",p,!1),document.addEventListener("click",Ma.closeSideNavScreen.bind(Ma),!1),document.addEventListener("touchstart",Ma.closeSideNavScreen.bind(Ma),!1)}function Q(a,b){var c=document.createElement("div");c.id="simVersionErrorModal";var d="";d+='   <div class="tile-close-update"></div>',d+='   <div class="error-container">',d+='      <div class="alert"></div>',d+='      <div class="error-text-container">',d+="sim"==b?'         <div class="error-header">Update Required</div>':'         <div class="error-header">App Update Required</div>',d+='         <div class="error-description" style="',d+="sim"==b?'            ">A new version of '+a+" is available!</div>":'            ">'+a+" is not supported in this version of app!</div>",d+="      </div>",d+='      <div class="error-buttoncontainer">',d+='         <div class="error-button" id="update">Update</div>',d+="      </div>",d+="   </div>",c.innerHTML=d;var e=document.getElementById(a);e.parentNode.appendChild(c);var f=e.parentElement.classList[1];$("."+f+" .tile-close-update").off("click").on("click",function(){$("."+f+" #simVersionErrorModal").addClass("hide")}),$("."+f+" #update").off("click").on("click",function(){S(a,b)})}function R(a){for(var b="",c=0;c<Fa.length;c++)if(a==Fa[c].name){402==Fa[c].allsparkSupport?b="sim":404==Fa[c].allsparkSupport&&(b="app");break}"simVersionErrorModal"==document.getElementById(a).parentElement.lastChild.id?document.getElementById(a).parentElement.lastChild.classList.remove("hide"):Q(a,b)}function S(a,b){if("sim"==b)Z(a,!0),localStorage.setItem("simUpdateData",JSON.stringify(Fa)),U(a);else if("app"==b){window.readerAppHelper.ClearDirectory("allspark"),window.localStorage.removeItem("allspark"),window.localStorage.removeItem("simUpdateData");var c=device.platform.toLocaleLowerCase();c.match(/(iPad|iPhone|iPod|iOS)/gi)&&(c="ios"),c.match(/(droid)/gi)&&(c="android"),window.open(encodeURI(APP_DOWNLOAD_URL[c]),"_system"),navigator.app.exitApp()}}function T(a){for(var b=0;b<Ea.simulations.length;b++)if(a==Ea.simulations[b].name&&(window.analytics&&window.analytics.trackView(a),readerAppHelper.addADSEvents("FBS_SIMULATION",{artifactID:Ea.simulations[b].artifactID,memberID:JSON.parse(localStorage.AuthUserInfo).response.id,adsVisitorID:""}),""!=Ea.simulations[b].simulationUrl)){if(Ea.simulations[b].simulationUrl.match(/window.match_url/i)){var c=Ea.simulations[b].simulationUrl;window.open(c,"_blank","location=no,zoom=no,enableViewportScale=no")}else{var d=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?cordova.file.dataDirectory:cordova.file.externalDataDirectory,e=Ea.simulations[b].simulationUrl,f=e.split("/")[0],c=window.SIM_OPN_SRV+"/simulations/physics/"+f+".zip",g=(encodeURI(c),d+f+"/app/index.html");if(window.localStorage.getItem(f)){var h=g+"?referrer=ck12Launcher&Downloaded&loc=app&backUrl="+ta,i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;1==i?window.location.href=h:window.location.href=h}else{if(m()){var h=window.SIM_OPN_SRV+"/simulations/physics/"+e+"?referrer=ck12Launcher&loc=app&backUrl="+ta,i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;1==i?window.location.href=h:(document.getElementsByClassName("iframe-parent-sim")[0].classList.remove("hide"),document.getElementsByClassName("instruction-video-frame-sim")[0].setAttribute("src",h)),Ea.simulations[b].simulationUrl.match(/window.match_url/i)&&(window.location.href=Ea.simulations[b].simulationUrl);break}j()}}break}}function U(a){function b(){readerAppHelper.addADSEvents("FBS_SIMULATION_DOWNLOAD",{memberID:JSON.parse(localStorage.AuthUserInfo).response.id,artifactID:Ea.simulations[c].artifactID});var b=new FileTransfer;b.download(h,i,function(b){console.log("download complete: "+b.toURL()),zip.unzip(i,k,function(b){zip.unzip(d+f+"/app.zip",k+f,function(b){zip.unzip(d+f+"/app/css.zip",k+f+"/app",function(b){console.log("download complete-a"),
zip.unzip(d+f+"/app/js.zip",k+f+"/app",function(b){console.log("download complete-b"),zip.unzip(d+f+"/app/json.zip",k+f+"/app",function(b){console.log("download complete-c"),zip.unzip(d+f+"/app/assets.zip",k+f+"/app",function(b){window.localStorage.setItem(f,"true"),console.log("download complete-d"),document.getElementById("loadingOverlay").classList.add("hide"),document.getElementById(a).getElementsByClassName("tile-download")[0].classList.add("downloaded");var e=document.getElementById(a).parentElement.classList[1];$("."+e+" #simVersionErrorModal").addClass("hide"),W(Ea.simulations[c],c),za.push(f),Y(),zip.unzip(d+f+"/res.zip",k+f,function(a){console.log("download complete-e"),V(f),V(f+"/app"),V(f+"/res"),V(f+"/app/assets"),V(f+"/app/css"),V(f+"/app/js"),V(f+"/app/json")})})})})})})})},function(a){console.log("download error source "+a.source),console.log("download error target "+a.target),console.log("upload error code"+a.code);window.SIM_DWL_SRV+"/simulations/physics/"+e,/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;document.getElementById("loadingOverlay").classList.add("hide")},!1,{headers:{Authorization:"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="}})}if(m()){document.getElementById("loadingOverlay").classList.remove("hide");for(var c=0;c<Ea.simulations.length;c++){var d=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?cordova.file.dataDirectory:cordova.file.externalDataDirectory,e=Ea.simulations[c].simulationUrl,f=e.split("/")[0],g=window.SIM_DWL_SRV+"/simulations/physics/"+f+".zip",h=encodeURI(g),i=d+f+".zip",k=d;if(a==Ea.simulations[c].name){window.localStorage.getItem(f)?(console.log("already there"),document.getElementById("loadingOverlay").classList.add("hide")):b();break}}}else j()}function V(a){function b(a){alert("FILE SYSTEM FAILURE")}function c(c){c.root.getFile("Android/data/org.ck12.simulations/files/"+a+".zip",{create:!0,exclusive:!1},function(a){a.remove(function(){console.log("Vipin Bhai Chaa Gaye")},b)},b)}var a=a.toString();window.requestFileSystem(LocalFileSystem.PERSISTENT,1048576,c,b)}function W(b,c){var d=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?cordova.file.dataDirectory:cordova.file.externalDataDirectory,e=b.simulationUrl,f=e.split("/")[0],g=d+f+"/package.json";a.loadURL(g,{callback:function(a){if(a){a=JSON.parse(a);var d=a.minAppVersion||"1",e=a.version||"1";e=e.split(".")[0],console.log(a),wa>=d?e==b.simVersionSupported?allsparkSupport=200:allsparkSupport=402:allsparkSupport=404,Fa[c].allsparkSupport=allsparkSupport,localStorage.setItem("simUpdateData",JSON.stringify(Fa)),Fa=JSON.parse(localStorage.getItem("simUpdateData"));var f=document.getElementsByClassName("tile-download")[c];404==Fa[c].allsparkSupport?f.classList.add("update-available"):402==Fa[c].allsparkSupport?f.classList.add("update-available"):402==Fa[c].allsparkSupport&&f.classList.remove("update-available")}}})}function X(a){function b(a){alert("FILE SYSTEM FAILURE")}function c(c){c.root.getDirectory("Android/data/org.ck12.simulations/files/"+a,{create:!0,exclusive:!1},function(a){a.removeRecursively(function(){console.log("Remove Recursively Succeeded")},b)},b)}var a=a.toString();window.localStorage.removeItem(a),window.requestFileSystem(LocalFileSystem.PERSISTENT,1048576,c,b)}function Y(){xa=!1;for(var a=document.getElementById("offlineTab"),b=0;b<Ea.simulations.length;b++){var c=document.getElementsByClassName("tile-download")[b],d=Ea.simulations[b].simulationUrl,e=d.split("/")[0];(c.classList.contains("downloaded")||window.localStorage.getItem(e))&&(xa=!0)}xa?(document.getElementsByClassName("toggle-button-container")[0].classList.remove("opacityZero"),document.getElementsByClassName("toggle-button-container")[0].classList.contains("hideOffline")&&document.getElementsByClassName("toggle-button-container")[0].classList.remove("hideOffline")):(a.classList.contains("toggle-button-selected")&&(a.classList.remove("toggle-button-selected"),ya=!1),X("1.0.8"),X("allspark"),V("1.0.8"),window.localStorage.removeItem("allspark"),document.getElementsByClassName("toggle-button-container")[0].classList.add("hideOffline"),na())}function Z(a,b){for(var c=a.toLowerCase().replace(/ /g,"-").replace(/'/g,""),d=(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?cordova.file.dataDirectory:cordova.file.externalDataDirectory,c+"/app/index.html"),e=d.split("/")[0],f=window.SIM_DWL_SRV+"/simulations/physics/"+e+".zip",g=(encodeURI(f),0);g<Ea.simulations.length;g++){var d=(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?cordova.file.dataDirectory:cordova.file.externalDataDirectory,Ea.simulations[g].simulationUrl),e=d.split("/")[0],f=window.SIM_DWL_SRV+"/simulations/physics/"+e+".zip";encodeURI(f);if(a==Ea.simulations[g].name){readerAppHelper.addADSEvents("FBS_SIMULATION_DELETE",{memberID:JSON.parse(localStorage.AuthUserInfo).response.id,artifactID:Ea.simulations[g].artifactID}),X(e),window.localStorage.removeItem(e),document.getElementById(a).getElementsByClassName("tile-download")[0].classList.remove("downloaded"),document.getElementById(a).getElementsByClassName("tile-download")[0].classList.remove("update-available");var h=za.indexOf(e);h>-1&&za.splice(h,1),b||(ma(a),Y()),document.getElementById("deletePermissionView").classList.add("hide")}}}function _(a){prevItem="",Ra=[],Qa=[],la(),qb=!0,La.unselectAllCheckBox(),Ma&&Ma.unselectAllCheckBox(),ba(),ca(),da(),ob=Ja.value.toLowerCase(),prevItem===ob||a.keyCode<91&&a.keyCode>47&&setTimeout(function(){prevItem===ob||readerAppHelper.addADSEvents("FBS_SIMULATION_SEARCH",{searchTerm:ob}),prevItem=ob},1e3),qb&&document.getElementsByClassName("no-match-found")[0].classList.remove("hide"),""==Ja.value?document.getElementsByClassName("clear-item")[0].classList.add("hide-back"):window.innerWidth>900&&document.getElementsByClassName("clear-item")[0].classList.remove("hide-back")}function aa(a){a.preventDefault(),a.stopPropagation();document.getElementsByClassName("filter-button")[0];pb=window.scrollY}function ba(){var a=Ja.value.toLowerCase();a=a.trim();for(var b=new RegExp(a,"i"),c=0;c<Ea.simulations.length;c++){var d=Ea.simulations[c].name.toLowerCase(),e=d.match(b);e&&e.input==Ea.simulations[c].name.toLowerCase()&&(ya?ea(c):(oa(c),qb=!1))}}function ca(){document.getElementsByClassName("no-match-found")[0].classList.add("hide");var a=Ja.value.toLowerCase();a=a.trim();for(var b=new RegExp(a,"i"),c=0;c<Ga.concepts.length;c++){var d=Ga.concepts[c].name.toLowerCase(),e=d.match(b);if(e&&e.input==Ga.concepts[c].name.toLowerCase())for(var f=0;f<Ea.simulations.length;f++)for(var g=0;g<Ea.simulations[f].concepts.length;g++)Ga.concepts[c].encodedID==Ea.simulations[f].concepts[g]&&(ya?ea(f):(oa(f),qb=!1))}}function da(){var a=Ja.value.toLowerCase();a=a.trim();for(var b=new RegExp(a,"i"),c=0;c<Ea.simulations.length;c++)for(var d=0;d<Ea.simulations[c].keywords.length;d++){var e=Ea.simulations[c].keywords[d].toLowerCase(),f=e.match(b);f&&f.input==Ea.simulations[c].keywords[d].toLowerCase()&&(ya?ea(c):(oa(c),qb=!1))}}function ea(a){for(var b in za)Ea.simulations[a].name.toLowerCase().replace(/ /g,"-").replace(/'/g,"")===za[b]&&(oa(a),qb=!1)}function fa(a){sb=a,rb=sb||tb,rb?window.innerWidth>900&&document.getElementsByClassName("clear-item")[0].classList.remove("hide-back"):ya?(document.getElementById("offlineTab").classList.remove("toggle-button-selected"),ya=!1):(na(),Ra=[],document.getElementsByClassName("clear-item")[0].classList.add("hide-back")),document.getElementsByClassName("no-match-found")[0].classList.add("hide")}function ga(a){tb=a,rb=sb||tb,rb?window.innerWidth>900&&document.getElementsByClassName("clear-item")[0].classList.remove("hide-back"):ya?(document.getElementById("offlineTab").classList.remove("toggle-button-selected"),ya=!1,na()):(na(),Qa=[],document.getElementsByClassName("clear-item")[0].classList.add("hide-back")),document.getElementsByClassName("no-match-found")[0].classList.add("hide")}function ha(a){Ra=a,0==Ra.length&&0==Qa.length?na():(la(),ja(Ra)),Ja.value="",ka(Qa)}function ia(a){Qa=a,0==Qa.length&&0==Ra.length?na():(la(),ka(Qa)),Ja.value="",ja(Ra)}function ja(a){for(var b=0;b<a.length;b++)for(var c=0;c<Ga.concepts.length;c++){var d=Ga.concepts[c].name.toLowerCase();if(d==a[b])for(var e=0;e<Ea.simulations.length;e++)for(var f=0;f<Ea.simulations[e].concepts.length;f++)Ga.concepts[c].encodedID==Ea.simulations[e].concepts[f]&&oa(e,!0)}ya&&setTimeout(function(){for(var a=!0,b=0;b<Ea.simulations.length;b++){if(!document.getElementsByClassName("thumbnail-view")[b].classList.contains("hide-back")){document.getElementsByClassName("no-match-found")[0].classList.add("hide"),a=!1;break}a=!0}a&&document.getElementsByClassName("no-match-found")[0].classList.remove("hide")},500)}function ka(a){for(var b,c=[],d=0;d<a.length;d++){for(var e in Ha.response.standards){var f=Ha.response.standards[e].label.toLowerCase();f==a[d].toLowerCase()&&(b=Ha.response.standards[e].sid.toLowerCase())}for(var e in Ha.response.concepts)for(var f=Ha.response.concepts[e].standards,g=0;g<f.length;g++)if(f[g].toLowerCase()==b){var h=Ha.response.concepts[e].concept.name.toLowerCase();c.push(h)}}ja(c)}function la(){for(var a=0;a<Ea.simulations.length;a++){var b=document.getElementsByClassName("thumbnail-view")[a];b.classList.add("hide-back")}}function ma(a){for(var b=0;b<Ea.simulations.length;b++)if(a==Ea.simulations[b].name){var c=document.getElementsByClassName("thumbnail-view")[b];c.classList.add("hide-back")}}function na(){for(var a=0;a<Ea.simulations.length;a++){var b=document.getElementsByClassName("thumbnail-view")[a],c=document.getElementsByClassName("tile-delete")[a],d=document.getElementsByClassName("tile-download")[a];b.classList.remove("hide-back"),c.classList.add("hide"),d.classList.remove("hide")}}function oa(a,b){if(b)if(ya){for(var c in za)if(Ea.simulations[a].name.toLowerCase().replace(/ /g,"-").replace(/'/g,"")===za[c]){var d=document.getElementsByClassName("thumbnail-view")[a];d.classList.remove("hide-back")}}else{var d=document.getElementsByClassName("thumbnail-view")[a];d.classList.remove("hide-back")}else{var d=document.getElementsByClassName("thumbnail-view")[a];d.classList.remove("hide-back")}}function pa(a){a.stopPropagation(),Sa&&(Sa.classList.add("hide"),Ta.style.fontWeight="normal"),a.target.classList.contains("nav-bottom")||a.target.classList.contains("filter-menu-wrapper")||document.getElementsByClassName("filter-main-wrapper")[0].classList.add("go-left"),a.target.classList.contains("signout")||a.target.classList.contains("user-profile-screen")||a.target.classList.contains("user-profile-container")||a.target.classList.contains("email")||a.target.classList.contains("name")||document.querySelector("#UserProfileView").classList.add("hide")}window.console.log=function(){};var qa,ra=!0;"-1"!=document.domain.search("ck12.org")&&(document.domain="ck12.org"),requirejs(["../auth/js/version"],function(a){wa=a.major,console.log(wa),setTimeout(function(){document.getElementById("versionDiv").innerHTML="v"+a.version},500)});var sa,ta,ua,va,wa,xa=!1,ya=!1,za=[];sa=ta=window.location.href,sa.indexOf("referrer=")>-1&&(sa.indexOf("referrer=simulation")>-1?ua=sa.slice(sa.indexOf("simulationName=")+15,sa.length):sa.indexOf("referrer=teacher")>-1?ua="teacher_landing":sa.indexOf("referrer=student")>-1&&(ua="student_landing"),ta=window.location.origin+window.location.pathname),va=window.location.origin+window.location.pathname.split("index.html")[0];var Aa=document.createElement("div");Aa.id="deviceCompatibilityAlert",Aa.classList.add("device-alert"),Aa.classList.add("hide"),Aa.innerHTML='<div class="device-message"></div><div class="device-error-message">Our simulations are compatible with tablets, laptops and desktops.</div>',document.getElementsByTagName("body")[0].appendChild(Aa);var Ba=700;if(window.outerWidth>window.outerHeight&&window.outerWidth<Ba||window.outerWidth<window.outerHeight&&window.outerHeight<Ba||navigator.userAgent.match(/(iPhone|iPodN)/g))return Aa.classList.remove("hide"),window.outerWidth>window.outerHeight&&(document.getElementsByClassName("device-message")[0].style.marginTop="8%"),void(Aa.ontouchmove=function(a){a.preventDefault()});var Ca,c;window.SIM_OPN_SRV=/www.ck12.org/i.test(window.API_SERVER_NAME)?"http://interactives.ck12.org":"http://simdev.ck12.org",window.SIM_DWL_SRV=/www.ck12.org/i.test(window.API_SERVER_NAME)?"http://interactives.ck12.org":"http://simdev.ck12.org";var Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na=document.getElementsByTagName("body")[0],Oa=[],Pa=[],Qa=[],Ra=[];a.loadURL(window.API_SERVER_URL+"/auth/get/info/my",{withCredentials:!0,callback:c});var i,l;a.loadURL("html/cover.html",{callback:i});var Sa,Ta,Ua,Va,Wa,Xa,Ya=[],Za=!0,$a=[],_a=[],ab=[],bb=[],cb=[],db=[],eb=[{name:"Motion and Force",data:$a},{name:"Momentum, Work, Power, and Energy",data:_a},{name:"Waves",data:ab},{name:"Electricity and Magnetism",data:bb},{name:"Atom",data:cb},{name:"Introduction to Physics",data:db}],fb=!0,gb=!0,hb=[],ib=[],jb=[],kb=[],lb=[],mb=[],nb=[{name:"MS-ESS",data:jb},{name:"MS-PS",data:kb},{name:"HS-ESS",data:lb},{name:"HS-PS",data:mb}];document.addEventListener("backbutton",function(){document.getElementsByClassName("iframe-parent-sim")[0].classList.contains("hide")?navigator.app.exitApp():(document.getElementsByClassName("instruction-video-frame-sim")[0].setAttribute("src",""),document.getElementsByClassName("iframe-parent-sim")[0].classList.add("hide"))});var ob,pb=0,qb=!0,rb=!1,sb=!1,tb=!1}),define("SideNavigation",["ajax"],function(a){function b(a){conceptResponse=JSON.parse(a),f=conceptResponse.concepts}function c(a){standardsResponse=JSON.parse(a),g=standardsResponse.response.standards;for(var b in g)h.push(b)}function d(a){this.sideNavScreen,this.isNav=!1,this.isChecked=!1,this.parent=a.parent,this.data=a.data,this.simData=a.simData,this.sortedData=[],this.search=a.search,this.setSearched=a.setSearched,this.newNames=[],this.oldNames=[],this.groupBox=[],this.dataEidArray=this.data,this.dataGroup=!1,this.sideNavScreen=document.createElement("div"),this.sideNavScreen.classList.add("side-nav-screen"),this.parent.appendChild(this.sideNavScreen),this.sideNavScreen.addEventListener("click",this.doNothing,!1),this.sideNavScreen.addEventListener("touchstart",this.doNothing,!1),this.sortDataElements(),this.createDataElements()}function e(a,b){for(;b>0;)a=a.parentElement,b--;return a}var f,g,h=[];return a.loadURL("json/eids.json",{callback:b}),a.loadURL("json/standardsData.json",{callback:c}),d.prototype.sortDataElements=function(){this.sortedData=this.data},d.prototype.createDataElements=function(){var a=document.createElement("div");a.classList.add("side-nav-heading"),this.sideNavScreen.appendChild(a),this.navBottom=document.getElementsByClassName("nav-bottom")[0];var b=document.createElement("div");b.classList.add("side-nav-content"),this.sideNavScreen.appendChild(b);for(var c=0;c<this.data.length;c++)if(this.data[c].data.length){this.groupBox.push(this.groupBox+c),this.groupBox[c]=document.createElement("div"),this.groupBox[c].classList.add("group-box"),this.groupBox[c].classList.add("group-box"+c),b.appendChild(this.groupBox[c]);var d=document.createElement("div");d.classList.add("ckeck-box"),this.groupBox[c].appendChild(d),d.isChecked=!1;var e=document.createElement("div");e.classList.add("group-name"),this.groupBox[c].appendChild(e),e.innerHTML=this.data[c].description||this.data[c].name,e.addEventListener("click",this.groupNameFn.bind(this),!1),d.addEventListener("click",this.groupCheckBoxFn.bind(this),!1);var f=document.createElement("div");f.classList.add("group-content"),f.classList.add("group-content"+c),this.groupBox[c].appendChild(f);for(var g="",h=0;h<this.data[c].data.length;h++)g=this.data[c].data[h].label?g+'<div class="concept-box concept-box'+c+"-"+h+'"><div class="ckeck-box"></div><div class="concept-name" data="'+this.data[c].data[h].label+'">'+this.data[c].data[h].label+"</div></div>":g+'<div class="concept-box concept-box'+c+"-"+h+'"><div class="ckeck-box"></div><div class="concept-name" data="'+this.data[c].data[h]+'">'+this.data[c].data[h]+"</div></div>";f.innerHTML=g;for(var i=f.getElementsByClassName("concept-box"),j=0;j<i.length;j++)i[j].addEventListener("click",this.conceptBoxFn.bind(this),!1),i[j].isChecked=!1;e.click()}},d.prototype.groupNameFn=function(a){a.stopPropagation(),a.currentTarget.isView?(a.currentTarget.isView=!1,a.currentTarget.nextSibling.classList.remove("group-collapse"),a.currentTarget.nextSibling.classList.remove("group-hide")):(a.currentTarget.isView=!0,a.currentTarget.nextSibling.classList.add("group-collapse"),a.currentTarget.nextSibling.classList.add("group-hide"))},d.prototype.groupCheckBoxFn=function(a){var b,c;a.stopPropagation(),a.currentTarget.nextSibling.isView&&a.currentTarget.nextSibling.click();var d=e(a.target,4);if("concept-filter concept-filter-list"==d.className){for(var i=0;i<f.length;i++)f[i].name==a.currentTarget.parentElement.childNodes[1].innerText&&(b=f[i].encodedID);c="context_eid"}else if("standard-filter standards-filter-list"==d.className){for(var i=0;i<h.length;i++)g[h[i]].label==a.target.nextElementSibling.innerHTML&&(b=g[h[i]].sid);c="sid"}if(a.currentTarget.isChecked){this.dataGroup=!1,a.currentTarget.isChecked=!1,a.currentTarget.classList.remove("checked");for(var j=0;j<a.currentTarget.nextSibling.nextSibling.childNodes.length;j++){var k=a.currentTarget.nextSibling.nextSibling.childNodes[j];k.childNodes[0].classList.add("checked"),k.isChecked=!0,k.childNodes[0].isChecked=!0,k.click()}}else{this.dataGroup=!0,a.currentTarget.isChecked=!0,a.currentTarget.classList.add("checked");for(var j=0;j<a.currentTarget.nextSibling.nextSibling.childNodes.length;j++){var k=a.currentTarget.nextSibling.nextSibling.childNodes[j];k.childNodes[0].classList.remove("checked"),k.isChecked=!1,k.childNodes[0].isChecked=!1,k.click()}"context_eid"==c?readerAppHelper.addADSEvents("FBS_SIMULATION_FILTER",{context_eid:b}):(c="sid")&&readerAppHelper.addADSEvents("FBS_SIMULATION_FILTER_STANDARD",{sid:b,filterType:"standard"})}},d.prototype.openSideNavScreen=function(a){a.stopPropagation();var b,c=a.currentTarget,d=a.currentTarget;c!=a.currentTarget&&c.isNav?(document.getElementsByClassName("show-menu")[0].click(),c.isNav=!1):d!=a.currentTarget&&d.isNav&&(document.getElementsByClassName("show-menu")[1].click(),d.isNav=!1),a.target.innerHTML.indexOf("Standards")>-1?b="standards":a.target.innerHTML.indexOf("Concepts")>-1&&(b="concept"),readerAppHelper.addADSEvents("FBS_SIMULATION_BROWSE_FILTER",{filterType:b})},d.prototype.closeSideNavScreen=function(a){a.stopPropagation();var b=document.getElementsByClassName("show-menu")[0].parentNode,c=document.getElementsByClassName("show-menu")[1].parentNode;b.isNav?(b.click(),b.isNav=!1,b.childNodes[3].classList.remove("rotate-show")):c.isNav&&(c.click(),c.isNav=!1,c.childNodes[3].classList.remove("rotate-show"))},d.prototype.doNothing=function(a){a.stopPropagation()},d.prototype.deselectAll=function(a){a.stopPropagation(),a.preventDefault(),this.unselectAllCheckBox(),this.setSearched(!1),this.search(this.newNames)},d.prototype.showAll=function(a){for(var b=0;b<this.simData.simulations.length;b++){var c=document.getElementsByClassName("thumbnail-view")[b];c.classList.remove("hide-back")}},d.prototype.unselectAllCheckBox=function(a){for(var b=0;b<this.data.length;b++){this.groupBox[b].childNodes[0].classList.remove("checked"),this.groupBox[b].childNodes[0].isChecked=!1;for(var c=0;c<this.data[b].data.length;c++){var d=this.groupBox[b].childNodes[2].childNodes[c];d.childNodes[0].classList.remove("checked"),d.isChecked=!1,d.childNodes[0].isChecked=!1}}this.newNames=[];var e=window.innerHeight-140;document.getElementsByClassName("filter-container")[0].style.height=e+"px",document.getElementsByClassName("nav-bottom")[0].classList.remove("deselect")},d.prototype.selectCheckBox=function(a){var b=window.innerHeight-140-39;document.getElementsByClassName("filter-container")[0].style.height=b+"px";for(var c=0;c<a.length;c++)for(var d=0;d<this.data.length;d++)if(this.data[d].length>1)for(var e=1;e<this.data[d].length;e++){var f=this.groupBox[d].childNodes[2].childNodes[e-1];a[c]==f.childNodes[1].innerHTML.toLowerCase()&&(f.childNodes[0].classList.add("checked"),f.isChecked=!0,f.childNodes[0].isChecked=!0,this.newNames.push(a[c]))}this.newNames.length>0?(document.getElementsByClassName("nav-bottom")[0].classList.add("deselect"),window.innerWidth>900&&document.getElementsByClassName("clear-item")[0].classList.remove("hide-back"),this.setSearched(!0)):(document.getElementsByClassName("nav-bottom")[0].classList.remove("deselect"),document.getElementsByClassName("clear-item")[0].classList.add("hide-back"),this.setSearched(!1))},d.prototype.conceptBoxFn=function(a){a.stopPropagation();var b,c,d=e(a.target,6);if("concept-filter-tab sort-box-concept"==d.className){for(var i=0;i<f.length;i++)f[i].name==a.currentTarget.parentElement.childNodes[1].innerText&&(b=f[i].encodedID);c="context_eid"}else if("standard-filter standards-filter-list"==d.className){for(var i=0;i<h.length;i++)g[h[i]].label==a.target.nextElementSibling.innerHTML&&(b=g[h[i]].sid);c="sid"}if(a.currentTarget.isChecked)a.currentTarget.childNodes[0].classList.remove("checked"),a.currentTarget.isChecked=!1,a.currentTarget.childNodes[0].isChecked=!1,a.currentTarget.parentNode.parentNode.firstChild.classList.remove("checked"),a.currentTarget.parentNode.parentNode.firstChild.isChecked=!1;else if(a.currentTarget.childNodes[0].classList.add("checked"),a.currentTarget.isChecked=!0,a.currentTarget.childNodes[0].isChecked=!0,this.dataGroup||("context_eid"==c?readerAppHelper.addADSEvents("FBS_SIMULATION_FILTER",{context_eid:b}):"sid"==c&&readerAppHelper.addADSEvents("FBS_SIMULATION_FILTER_STANDARD",{sid:b,filterType:"standard"})),0==a.currentTarget.parentNode.parentNode.childNodes[0].isChecked)for(var j=0;j<a.currentTarget.parentNode.childNodes.length;j++){var k=a.currentTarget.parentNode.childNodes[j];if(0==k.isChecked)break;j==a.currentTarget.parentNode.childNodes.length-1&&a.currentTarget.parentNode.parentNode.childNodes[0].click()}var l=a.currentTarget.childNodes[1].getAttribute("data")?a.currentTarget.childNodes[1].getAttribute("data").toLowerCase():a.currentTarget.childNodes[1].innerHTML.toLowerCase();this.oldNames=this.newNames,this.newNames=[];for(var i=0;i<this.oldNames.length;i++)this.oldNames[i]==l||this.newNames.push(this.oldNames[i]);(0==this.newNames.length&&a.currentTarget.isChecked||a.currentTarget.isChecked)&&this.newNames.push(l);var m;this.newNames.length>0?(m=window.innerHeight-140-39,document.getElementsByClassName("filter-container")[0].style.height=m+"px",document.getElementsByClassName("nav-bottom")[0].classList.add("deselect"),window.innerWidth>900&&document.getElementsByClassName("clear-item")[0].classList.remove("hide-back"),this.setSearched(!0)):(0==sidenav2.newNames.length&&0==sidenav.newNames.length&&(m=window.innerHeight-140,document.getElementsByClassName("filter-container")[0].style.height=m+"px",document.getElementsByClassName("nav-bottom")[0].classList.remove("deselect")),document.getElementsByClassName("clear-item")[0].classList.add("hide-back"),this.setSearched(!1)),this.search(this.newNames)},d}),define("ajax",[],function(){var a={};return a.loadURL=function(a,b){var c=b,d=new XMLHttpRequest;if(b instanceof Object&&!(b instanceof Function)){c=b.callback;for(var e in b)b.hasOwnProperty(e)&&(d[e]=b[e])}d.onreadystatechange=function(){4===this.readyState&&c&&c(this.responseText)},d.open("GET",a),d.send()},a});